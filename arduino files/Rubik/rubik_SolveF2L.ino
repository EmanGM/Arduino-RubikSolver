
const char F2L_01[] PROGMEM = "";                 //  0 - Canto e edge na posiÃ§Ã£o certa, nÃ£o Ã© necessÃ¡rio executar qualquer movimento 
const char F2L_02[] PROGMEM = "RRuuFrrfUUrUr";    //  1 - Canto em baixo, W Down; Edge posiÃ§Ã£o contrÃ¡rio
const char F2L_03[] PROGMEM = "urururURUR";       //  2 - Canto em baixo, W Down; Edge B up[1]
const char F2L_04[] PROGMEM = "URurufUF";        //  3 - Canto em baixo, W Down; Edge R up[1]
const char F2L_05[] PROGMEM = "rururURUR";        //  4 - Canto em baixo, W Down; Edge B up[5]
const char F2L_06[] PROGMEM = "UURurufUF";        //  5 - Canto em baixo, W Down; Edge R up[5]
const char F2L_07[] PROGMEM = "UrururURUR";       //  6 - Canto em baixo, W Down; Edge B up[7]
const char F2L_08[] PROGMEM = "uuURurufUF";       //  7 - Canto em baixo, W Down; Edge R up[7]
const char F2L_09[] PROGMEM = "UUrururURUR";      //  8 - Canto em baixo, W Down; Edge B up[3]
const char F2L_10[] PROGMEM = "uURurufUF";        //  9 - Canto em baixo, W Down; Edge R up[3]
const char F2L_11[] PROGMEM = "RUruRUUruRUr";     // 10 - Canto em baixo, R Down; Edge B front
const char F2L_12[] PROGMEM = "RFURurfur";        // 11 - Canto em baixo, R Down; Edge R front
const char F2L_13[] PROGMEM = "uRurURur";         // 12 - Canto em baixo, R Down; Edge B up[1]
const char F2L_14[] PROGMEM = "rFRfrFRf";         // 13 - Canto em baixo, R Down; Edge R up[1]
const char F2L_15[] PROGMEM = "RurURur";          // 14 - Canto em baixo, R Down; Edge B up[5]
const char F2L_16[] PROGMEM = "UrFRfrFRf";        // 15 - Canto em baixo, R Down; Edge R up[5]
const char F2L_17[] PROGMEM = "URurURur";         // 16 - Canto em baixo, R Down; Edge B up[7]
const char F2L_18[] PROGMEM = "UUrFRfrFRf";       // 17 - Canto em baixo, R Down; Edge R up[7]
const char F2L_19[] PROGMEM = "uuRurURur";        // 18 - Canto em baixo, R Down; Edge B up[3]
const char F2L_20[] PROGMEM = "urFRfrFRf";        // 19 - Canto em baixo, R Down; Edge R up[3]
const char F2L_21[] PROGMEM = "RurURuurURur";     // 20 - Canto em baixo, B Down; Edge B front
const char F2L_22[] PROGMEM = "RUFRUrufr";        // 21 - Canto em baixo, B Down; Edge R front
const char F2L_23[] PROGMEM = "uRUruRUr";         // 22 - Canto em baixo, R Down; Edge B up[1]
const char F2L_24[] PROGMEM = "RUruufUF";         // 23 - Canto em baixo, R Down; Edge R up[1]
const char F2L_25[] PROGMEM = "RUruRUr";          // 24 - Canto em baixo, R Down; Edge B up[5]
const char F2L_26[] PROGMEM = "URUruufUF";        // 25 - Canto em baixo, R Down; Edge R up[5]
const char F2L_27[] PROGMEM = "URUruRUr";         // 26 - Canto em baixo, R Down; Edge B up[7]
const char F2L_28[] PROGMEM = "uuRUruufUF";       // 27 - Canto em baixo, R Down; Edge R up[7]
const char F2L_29[] PROGMEM = "uuRUruRUr";        // 28 - Canto em baixo, R Down; Edge B up[3]
const char F2L_30[] PROGMEM = "uRUruufUF";        // 29 - Canto em baixo, R Down; Edge R up[3]
const char F2L_31[] PROGMEM = "uRurUURur";        // 30 - Canto em cima, B Up; Edge B front 
const char F2L_32[] PROGMEM = "uRUrUfuF";         // 31 - Canto em cima, B Up; Edge R front
const char F2L_33[] PROGMEM = "RBLulbr";          // 32 - Canto em cima, B Up; Edge B up[1]
const char F2L_34[] PROGMEM = "RurUrFRfRur";      // 33 - Canto em cima, B Up; Edge R up[1]
const char F2L_35[] PROGMEM = "URur";             // 34 - Canto em cima, B Up; Edge B up[5]
const char F2L_36[] PROGMEM = "uRuurUfuF";        // 35 - Canto em cima, B Up; Edge R up[5]
const char F2L_37[] PROGMEM = "uRUruuRur";        // 36 - Canto em cima, B Up; Edge B up[7]
const char F2L_38[] PROGMEM = "uRurUfuF";         // 37 - Canto em cima, B Up; Edge R up[7]
const char F2L_39[] PROGMEM = "uRUUruRuur";       // 38 - Canto em cima, B Up; Edge B up[3]
const char F2L_40[] PROGMEM = "fuF";              // 39 - Canto em cima, B Up; Edge R up[3]
const char F2L_41[] PROGMEM = "RUruRUruRUr";      // 40 - Canto em cima, W Up; Edge B front 
const char F2L_42[] PROGMEM = "urFRfRur";         // 41 - Canto em cima, W Up; Edge R front
const char F2L_43[] PROGMEM = "URuruRurURur";     // 42 - Canto em cima, W Up; Edge B up[1]
const char F2L_44[] PROGMEM = "rFRfRurURur";      // 43 - Canto em cima, W Up; Edge R up[1]
const char F2L_45[] PROGMEM = "RuuruRUr";         // 44 - Canto em cima, W Up; Edge B up[5]
const char F2L_46[] PROGMEM = "FURurfRur";        // 45 - Canto em cima, W Up; Edge R up[5]
const char F2L_47[] PROGMEM = "URuurURur";        // 46 - Canto em cima, W Up; Edge B up[7]
const char F2L_48[] PROGMEM = "fluuLF";           // 47 - Canto em cima, W Up; Edge R up[7]
const char F2L_49[] PROGMEM = "RuruuRUr";         // 48 - Canto em cima, W Up; Edge B up[3]
const char F2L_50[] PROGMEM = "ufUUffrfR";        // 49 - Canto em cima, W Up; Edge R up[3]
const char F2L_51[] PROGMEM = "URUruuRUr";        // 50 - Canto em cima, R Up; Edge B front  
const char F2L_52[] PROGMEM = "UfuFuRUr";         // 51 - Canto em cima, R Up; Edge R front
const char F2L_53[] PROGMEM = "UfuuFuRUr";        // 52 - Canto em cima, R Up; Edge B up[1]
const char F2L_54[] PROGMEM = "ufUF";             // 53 - Canto em cima, R Up; Edge R up[1]
const char F2L_55[] PROGMEM = "uRurURUr";         // 54 - Canto em cima, R Up; Edge B up[5]
const char F2L_56[] PROGMEM = "RurUUfuF";         // 55 - Canto em cima, R Up; Edge R up[5]
const char F2L_57[] PROGMEM = "RUr";              // 56 - Canto em cima, R Up; Edge B up[7]
const char F2L_58[] PROGMEM = "UfuuFuFrfR";       // 57 - Canto em cima, R Up; Edge R up[7]
const char F2L_59[] PROGMEM = "uRUrURUr";         // 58 - Canto em cima, R Up; Edge B up[3]
const char F2L_60[] PROGMEM = "rrBUbuRR";         // 59 - Canto em cima, R Up; Edge R up[3] 


const char * const F2L_LUT[60] PROGMEM = {
  F2L_01, F2L_02, F2L_03, F2L_04, F2L_05, F2L_06, F2L_07, F2L_08, F2L_09, F2L_10, F2L_11, F2L_12, F2L_13, F2L_14,
  F2L_15, F2L_16, F2L_17, F2L_18, F2L_19, F2L_20, F2L_21, F2L_22, F2L_23, F2L_24, F2L_25, F2L_26, F2L_27, F2L_28,
  F2L_29, F2L_30, F2L_31, F2L_32, F2L_33, F2L_34, F2L_35, F2L_36, F2L_37, F2L_38, F2L_39, F2L_40, F2L_41, F2L_42,
  F2L_43, F2L_44, F2L_45, F2L_46, F2L_47, F2L_48, F2L_49, F2L_50, F2L_51, F2L_52, F2L_53, F2L_54, F2L_55, F2L_56,
  F2L_57, F2L_58, F2L_59, F2L_60,
};


//const PROGMEM char *F2L_LUT[60] = {
//  "",                 //  0 - Canto e edge na posiÃ§Ã£o certa, nÃ£o Ã© necessÃ¡rio executar qualquer movimento 
//  "RRuuFrrfUUrUr",    //  1 - Canto em baixo, W Down; Edge posiÃ§Ã£o contrÃ¡rio
//  "urururURUR",       //  2 - Canto em baixo, W Down; Edge B up[1]
//  "URurufUF" ,        //  3 - Canto em baixo, W Down; Edge R up[1]
//  "rururURUR",        //  4 - Canto em baixo, W Down; Edge B up[5]
//  "UURurufUF",        //  5 - Canto em baixo, W Down; Edge R up[5]
//  "UrururURUR",       //  6 - Canto em baixo, W Down; Edge B up[7]
//  "uuURurufUF",       //  7 - Canto em baixo, W Down; Edge R up[7]
//  "UUrururURUR",      //  8 - Canto em baixo, W Down; Edge B up[3]
//  "uURurufUF",        //  9 - Canto em baixo, W Down; Edge R up[3]
//  "RUruRUUruRUr",     // 10 - Canto em baixo, R Down; Edge B front
//  "RFURurfur",        // 11 - Canto em baixo, R Down; Edge R front
//  "uRurURur",         // 12 - Canto em baixo, R Down; Edge B up[1]
//  "rFRfrFRf",         // 13 - Canto em baixo, R Down; Edge R up[1]
//  "RurURur",          // 14 - Canto em baixo, R Down; Edge B up[5]
//  "UrFRfrFRf",        // 15 - Canto em baixo, R Down; Edge R up[5]
//  "URurURur",         // 16 - Canto em baixo, R Down; Edge B up[7]
//  "UUrFRfrFRf",       // 17 - Canto em baixo, R Down; Edge R up[7]
//  "uuRurURur",        // 18 - Canto em baixo, R Down; Edge B up[3]
//  "urFRfrFRf",        // 19 - Canto em baixo, R Down; Edge R up[3]
//  "RurURuurURur",     // 20 - Canto em baixo, B Down; Edge B front
//  "RUFRUrufr",        // 21 - Canto em baixo, B Down; Edge R front
//  "uRUruRUr",         // 22 - Canto em baixo, R Down; Edge B up[1]
//  "RUruufUF",         // 23 - Canto em baixo, R Down; Edge R up[1]
//  "RUruRUr",          // 24 - Canto em baixo, R Down; Edge B up[5]
//  "URUruufUF",        // 25 - Canto em baixo, R Down; Edge R up[5]
//  "RUruRUr",          // 26 - Canto em baixo, R Down; Edge B up[7]
//  "uuRUruufUF",       // 27 - Canto em baixo, R Down; Edge R up[7]
//  "uuRUruRUr",        // 28 - Canto em baixo, R Down; Edge B up[3]
//  "uRUruufUF",        // 29 - Canto em baixo, R Down; Edge R up[3]
//  "uRurUURur",        // 30 - Canto em cima, B Up; Edge B front 
//  "uRUrUfuF",         // 31 - Canto em cima, B Up; Edge R front
//  "RBLulbr",          // 32 - Canto em cima, B Up; Edge B up[1]
//  "RurUrFRfRur",      // 33 - Canto em cima, B Up; Edge R up[1]
//  "URur",             // 34 - Canto em cima, B Up; Edge B up[5]
//  "uRuurUfuF",        // 35 - Canto em cima, B Up; Edge R up[5]
//  "uRUruuRur",        // 36 - Canto em cima, B Up; Edge B up[7]
//  "uRurUfuF",         // 37 - Canto em cima, B Up; Edge R up[7]
//  "uRUUruRuur",       // 38 - Canto em cima, B Up; Edge B up[3]
//  "fuF",              // 39 - Canto em cima, B Up; Edge R up[3]
//  "RUruRUruRUr",      // 40 - Canto em cima, W Up; Edge B front 
//  "urFRfRur",         // 41 - Canto em cima, W Up; Edge R front
//  "URuruRurURur",     // 42 - Canto em cima, W Up; Edge B up[1]
//  "rFRfRurURur",      // 43 - Canto em cima, W Up; Edge R up[1]
//  "RuuruRUr",         // 44 - Canto em cima, W Up; Edge B up[5]
//  "FURurfRur",        // 45 - Canto em cima, W Up; Edge R up[5]
//  "URuurURur",        // 46 - Canto em cima, W Up; Edge B up[7]
//  "fluuLF",           // 47 - Canto em cima, W Up; Edge R up[7]
//  "RuruuRUr",         // 48 - Canto em cima, W Up; Edge B up[3]
//  "ufUUffrfR",        // 49 - Canto em cima, W Up; Edge R up[3]
//  "URUruuRUr",        // 50 - Canto em cima, R Up; Edge B front  
//  "UfuFuRUr",         // 51 - Canto em cima, R Up; Edge R front
//  "UfuuFuRUr",        // 52 - Canto em cima, R Up; Edge B up[1]
//  "ufUF",             // 53 - Canto em cima, R Up; Edge R up[1]
//  "uRurURUr",         // 54 - Canto em cima, R Up; Edge B up[5]
//  "RurUUfuF",         // 55 - Canto em cima, R Up; Edge R up[5]
//  "RUr",              // 56 - Canto em cima, R Up; Edge B up[7]
//  "UfuuFuFrfR",       // 57 - Canto em cima, R Up; Edge R up[7]
//  "uRUrURUr",         // 58 - Canto em cima, R Up; Edge B up[3]
//  "rrBUbuRR",         // 59 - Canto em cima, R Up; Edge R up[3] 
//};


void SolveF2LSlot(int Front_color, int Right_color) {
  char c; 
  char e;
  
  F2L_CornerException(Front_color, Right_color);

  
  if ((Rubik[RF_DOWN][8] == RC_WHITE) && (Rubik[RF_FRONT][2] == Front_color) && (Rubik[RF_RIGHT][0] == Right_color)) {
    c = 0;
  } else if ((Rubik[RF_DOWN][8] == Right_color) && (Rubik[RF_FRONT][2] == RC_WHITE) && (Rubik[RF_RIGHT][0] == Front_color)) {
    c = 1;
  } else if ((Rubik[RF_DOWN][8] == Front_color) && (Rubik[RF_FRONT][2] == Right_color) && (Rubik[RF_RIGHT][0] == RC_WHITE)) {
    c = 2;
  } else if ((Rubik[RF_UP][2] == Front_color) && (Rubik[RF_FRONT][8] == RC_WHITE) && (Rubik[RF_RIGHT][6] == Right_color)) {
    c = 3;
  } else if ((Rubik[RF_UP][2] == RC_WHITE) && (Rubik[RF_FRONT][8] == Right_color) && (Rubik[RF_RIGHT][6] == Front_color)) {
    c = 4;
  } else if ((Rubik[RF_UP][2] == Right_color) && (Rubik[RF_FRONT][8] == Front_color) && (Rubik[RF_RIGHT][6] == RC_WHITE)) {
    c = 5;
  }

  F2L_EdgeException(Front_color, Right_color);
  
  if ((Rubik[RF_FRONT][5] == Front_color) && (Rubik[RF_RIGHT][3] == Right_color)) {
    e = 0;
  } else if ((Rubik[RF_FRONT][5] == Right_color) && (Rubik[RF_RIGHT][3] == Front_color)) {
    e = 1;
  } else if ((Rubik[RF_UP][1] == Front_color) && (Rubik[RF_FRONT][7] == Right_color)) {
    e = 2;
  } else if ((Rubik[RF_UP][1] == Right_color) && (Rubik[RF_FRONT][7] == Front_color)) {
    e = 3;
  } else if ((Rubik[RF_UP][5] == Front_color) && (Rubik[RF_RIGHT][7] == Right_color)) {
    e = 4;
  } else if ((Rubik[RF_UP][5] == Right_color) && (Rubik[RF_RIGHT][7] == Front_color)) {
    e = 5;
  } else if ((Rubik[RF_UP][7] == Front_color) && (Rubik[RF_BACK][7] == Right_color)) {
    e = 6;
  } else if ((Rubik[RF_UP][7] == Right_color) && (Rubik[RF_BACK][7] == Front_color)) {
    e = 7;
  } else if ((Rubik[RF_UP][3] == Front_color) && (Rubik[RF_LEFT][7] == Right_color)) {
    e = 8;
  } else if ((Rubik[RF_UP][3] == Right_color) && (Rubik[RF_LEFT][7] == Front_color)) {
    e = 9;
  } 

  int i = c * 10 + e;
//  Serial.println(i);
//  Serial.flush();
  //rubik.RotateStr(F2L_LUT[i]);
  rubik.RotateStr_Progmem(ProgStrArray_Index(F2L_LUT, i));
}

void F2L_CornerException(char Front_color, char Right_color) {
  if((Rubik[RF_UP][8] == RC_WHITE && Rubik[RF_RIGHT][8] == Right_color      && Rubik[RF_BACK][6] == Front_color) ||
     (Rubik[RF_UP][8] == Right_color      && Rubik[RF_RIGHT][8] == Front_color     && Rubik[RF_BACK][6] == RC_WHITE) || 
     (Rubik[RF_UP][8] == Front_color     && Rubik[RF_RIGHT][8] == RC_WHITE && Rubik[RF_BACK][6] == Right_color)) {
      rubik.RotateStr("U");
    } else if((Rubik[RF_UP][6] == RC_WHITE && Rubik[RF_BACK][8] == Right_color      && Rubik[RF_LEFT][6] == Front_color) || 
              (Rubik[RF_UP][6] == Right_color      && Rubik[RF_BACK][8] == Front_color     && Rubik[RF_LEFT][6] == RC_WHITE) || 
              (Rubik[RF_UP][6] == Front_color     && Rubik[RF_BACK][8] == RC_WHITE && Rubik[RF_LEFT][6] == Right_color)) {
      rubik.RotateStr("UU");
    } else if((Rubik[RF_UP][0] == RC_WHITE && Rubik[RF_FRONT][6] == Front_color     && Rubik[RF_LEFT][8] == Right_color) || 
              (Rubik[RF_UP][0] == Front_color     && Rubik[RF_FRONT][6] == Right_color      && Rubik[RF_LEFT][8] == RC_WHITE) || 
              (Rubik[RF_UP][0] == Right_color      && Rubik[RF_FRONT][6] == RC_WHITE && Rubik[RF_LEFT][8] == Front_color)) {
      rubik.RotateStr("u");
    } else if((Rubik[RF_DOWN][2] == RC_WHITE && Rubik[RF_RIGHT][2] == Front_color     && Rubik[RF_BACK][0] == Right_color) ||
              (Rubik[RF_DOWN][2] == Front_color     && Rubik[RF_RIGHT][2] == Right_color      && Rubik[RF_BACK][0] == RC_WHITE) ||
              (Rubik[RF_DOWN][2] == Right_color      && Rubik[RF_RIGHT][2] == RC_WHITE && Rubik[RF_BACK][0] == Front_color)) {
      rubik.RotateStr("rUURu");
    } else if((Rubik[RF_DOWN][0] == RC_WHITE && Rubik[RF_BACK][2] == Front_color     && Rubik[RF_LEFT][0] == Right_color) ||
              (Rubik[RF_DOWN][0] == Front_color     && Rubik[RF_BACK][2] == Right_color      && Rubik[RF_LEFT][0] == RC_WHITE) ||
              (Rubik[RF_DOWN][0] == Right_color      && Rubik[RF_BACK][2] == RC_WHITE && Rubik[RF_LEFT][0] == Front_color)) {
      rubik.RotateStr("LUUl"); 
    } else if((Rubik[RF_DOWN][6] == RC_WHITE && Rubik[RF_LEFT][2] == Front_color && Rubik[RF_FRONT][0] == Right_color) ||
              (Rubik[RF_DOWN][6] == Front_color  && Rubik[RF_LEFT][2] == Right_color  && Rubik[RF_FRONT][0] == RC_WHITE) ||
              (Rubik[RF_DOWN][6] == Right_color  && Rubik[RF_LEFT][2] == RC_WHITE && Rubik[RF_FRONT][0] == Front_color)) {
      rubik.RotateStr("luL"); 
    } 
}

void F2L_EdgeException(char Front_color, char Right_color) {
  if((Rubik[RF_RIGHT][5] == Front_color && Rubik[RF_BACK][3] == Right_color) ||
     (Rubik[RF_RIGHT][5] == Right_color  && Rubik[RF_BACK][3] == Front_color)) {
      rubik.RotateStr("ruR");  
    } else if((Rubik[RF_BACK][5] == Front_color && Rubik[RF_LEFT][3] == Right_color) ||
              (Rubik[RF_BACK][5] == Right_color  && Rubik[RF_LEFT][3] == Front_color)) {
      rubik.RotateStr("LulU");          
    } else if((Rubik[RF_LEFT][5] == Front_color && Rubik[RF_FRONT][3] == Right_color) ||
              (Rubik[RF_LEFT][5] == Right_color  && Rubik[RF_FRONT][3] == Front_color)) {
      rubik.RotateStr("luLU");
    } 
}

void SolveF2L(){
  SolveF2LSlot(RC_RED, RC_GREEN);
  rubik.RotateStr("Y");
  SolveF2LSlot(RC_BLUE, RC_RED);
  rubik.RotateStr("Y");
  SolveF2LSlot(RC_ORANGE, RC_BLUE);
  rubik.RotateStr("Y");
  SolveF2LSlot(RC_GREEN, RC_ORANGE);
  rubik.RotateStr("Y");
}
